<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/style.css">
    <title>成功登入</title>
</head>
<body>
    <h1>歡迎光臨，這是會員頁</h1>
    <h2>{{  name }}，歡迎登入系統</h2>
    <a href="/logout">登出系統</a>   

    <hr class="divider">  <!-- 水平橫線 -->
    
    <!-- 留言表單 -->
    <h2>快來留言吧</h2>
    <form action="/createMessage" method="post">
        <label>
            內容
            <input type="text" name="content">
        </label>
        <br><br>
        <button type="submit">送出</button>
    </form>
    
    <hr class="divider">  <!-- 水平橫線 -->
    <h3>所有留言</h3>
    <ul>
    {% for msg in messages %}
        <li>
            <strong>{{ msg.name }}: </strong> {{ msg.content }}

            {% if msg.member_id == current_user_id %}
                <form action="/deleteMessage" method="post" style="display:inline;" onsubmit="return confirm('確定刪除?');">
                    <input type="hidden" name="message_id" value="{{ msg.id }}">
                    <button type="submit" class="deletebutton">x</button>
                </form>
            {%  endif %}
        </li>
    {%  endfor %}
    </ul>
    
</body>
</html>